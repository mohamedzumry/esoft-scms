import{K as N,r as f,j as e,L as C,S as o}from"./app-BqgjSa7h.js";import{B as l}from"./button-f7xD2yd9.js";import{C as y,a as R,b,c as _,d as S}from"./card-F8WD3vKb.js";import{D,a as T,b as A,c as w,d as L}from"./dialog-ClbPdm2M.js";import{T as z,a as k,b as p,c as m}from"./tabs-B1_z_re0.js";import{A as B}from"./app-layout-DZa-I5H7.js";import{c as i}from"./index-DPnCFab2.js";import E from"./create-reservation-form-DJip5fTe.js";import"./index-B4bWSZca.js";import"./index-BQDKezta.js";import"./index-r0Qgb-MZ.js";import"./index-y_G3aFvS.js";import"./index-CHCWTLiE.js";import"./index-lXOJ2YE7.js";import"./index-Cj_Yjniq.js";import"./app-logo-icon-DHy56tQj.js";import"./label-JH_K8sT2.js";import"./select-C9iFXshG.js";import"./index-DKhMY_BN.js";import"./textarea-CYU-22HX.js";function ae({reservations:s,resources:c,auth:t}){const{flash:r}=N().props,[u,j]=f.useState("approved");f.useEffect(()=>{r.success&&i.success(r.success)},[r]);const d=s.filter(a=>a.approval_status==="pending"),n=s.filter(a=>a.approval_status==="approved"),g=s.filter(a=>a.approval_status==="rejected"),h=s.filter(a=>a.approval_status==="cancelled"),v=t.user.role==="admin"||t.user.role==="it_staff";return e.jsxs(B,{children:[e.jsx(C,{title:"Reservations"}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs(D,{children:[e.jsx(T,{asChild:!0,children:e.jsx(l,{size:"sm",className:"mb-4 w-fit",children:"Create Reservation"})}),e.jsxs(A,{className:"sm:max-w-[425px]",children:[e.jsx(w,{children:e.jsx(L,{children:"Create New Reservation"})}),e.jsx(E,{resources:c,userRole:t.user.role})]})]}),e.jsxs(z,{value:u,onValueChange:a=>j(a),children:[e.jsxs(k,{className:"mb-8 flex justify-center space-x-4",children:[v&&e.jsx(p,{value:"pending",className:"px-4 py-2",children:"Pending"}),e.jsx(p,{value:"approved",className:"px-4 py-2",children:"Approved"}),e.jsx(p,{value:"rejected",className:"px-4 py-2",children:"Rejected"}),e.jsx(p,{value:"cancelled",className:"px-4 py-2",children:"Cancelled"})]}),v&&e.jsx(m,{value:"pending",children:d.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:d.map(a=>e.jsx(x,{reservation:a,auth:t},a.id))}):e.jsx("p",{className:"text-center text-gray-500",children:"No pending reservations found."})}),e.jsx(m,{value:"approved",children:n.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:n.map(a=>e.jsx(x,{reservation:a,auth:t},a.id))}):e.jsx("p",{className:"text-center text-gray-500",children:"No approved reservations found."})}),e.jsx(m,{value:"rejected",children:g.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:g.map(a=>e.jsx(x,{reservation:a,auth:t},a.id))}):e.jsx("p",{className:"text-center text-gray-500",children:"No rejected reservations found."})}),e.jsx(m,{value:"cancelled",children:h.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:h.map(a=>e.jsx(x,{reservation:a,auth:t},a.id))}):e.jsx("p",{className:"text-center text-gray-500",children:"No cancelled reservations found."})})]})]})]})}function x({reservation:s,auth:c}){const t=c.user.role==="admin"||c.user.role==="it_staff",r=c.user.id===s.reserved_by,u=()=>{o.put(route("reservations.approve",s.id),{},{onSuccess:()=>i.success("Reservation approved")})},j=()=>{o.put(route("reservations.reject",s.id),{},{onSuccess:()=>i.success("Reservation rejected")})},d=()=>{o.put(route("reservations.cancel",s.id),{},{onSuccess:()=>i.success("Reservation cancelled")})},n=()=>{o.delete(route("reservations.destroy",s.id),{onSuccess:()=>i.success("Reservation deleted")})};return e.jsxs(y,{className:"overflow-hidden rounded-lg shadow-md transition-transform hover:scale-105",children:[e.jsxs(R,{children:[e.jsx(b,{className:"text-lg font-semibold",children:s.purpose}),e.jsxs(_,{className:"text-sm text-gray-500",children:[s.resource.name," - ",new Date(s.start_date_time).toLocaleString()," to"," ",new Date(s.end_date_time).toLocaleString()]})]}),e.jsxs(S,{className:"p-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:s.description}),e.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:["Reserved by: ",s.user.name]}),e.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:["Status: ",s.approval_status]}),s.course&&e.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:["Course: ",s.course]}),s.batch&&e.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:["Batch: ",s.batch]}),e.jsxs("div",{className:"mt-4 flex space-x-2",children:[s.approval_status==="pending"&&t&&e.jsxs(e.Fragment,{children:[e.jsx(l,{variant:"default",size:"sm",onClick:u,children:"Approve"}),e.jsx(l,{variant:"destructive",size:"sm",onClick:j,children:"Reject"})]}),(s.approval_status==="rejected"||s.approval_status==="cancelled")&&(t||r)&&e.jsx(l,{variant:"destructive",size:"sm",onClick:n,children:"Delete"}),s.approval_status==="approved"&&(t||r)&&e.jsx(l,{variant:"outline",size:"sm",onClick:d,children:"Cancel"})]})]})]})}export{ae as default};
